!function(){"use strict";var e=window.wp.blocks,t=window.wp.i18n,l=JSON.parse('{"u2":"mine-cloudvod/user"}'),n=window.wp.element,o=window.wp.components,r=window.wp.blockEditor;const u=e=>{let{update:l,add:r,remove:u,sortno:i,title:s,url:a}=e;const[c,m]=(0,n.useState)(i),[d,p]=(0,n.useState)(s),[E,w]=(0,n.useState)(a);return(0,n.createElement)(o.Flex,{align:"center",direction:"column"},(0,n.createElement)(o.Flex,{align:"center"},(0,n.createElement)(o.FlexItem,null,(0,n.createElement)(o.TextControl,{style:{width:"40px"},placeholder:(0,t.__)("Sort No","mine-cloudvod"),value:c,onChange:e=>m(e),onBlur:()=>{let e=(e=>{let t=e+"";return t=t.replace(/[^\d]/g,""),t?(t=parseInt(t),t):"0"})(c);l({sortno:e}),m(e)},autoComplete:"off"})),(0,n.createElement)(o.FlexBlock,null,(0,n.createElement)(o.TextControl,{placeholder:(0,t.__)("Title","mine-cloudvod"),value:d,onChange:e=>{p(e),l({title:e})},autoComplete:"off"}))),(0,n.createElement)(o.Flex,{align:"center"},(0,n.createElement)(o.FlexBlock,null,(0,n.createElement)(o.TextControl,{placeholder:(0,t.__)("URL","mine-cloudvod"),value:E||"",onChange:e=>{w(e),l({url:e})},autoComplete:"off"})),(0,n.createElement)(o.FlexItem,null,u&&(0,n.createElement)(o.Button,{icon:"minus",style:{marginBottom:"8px"},label:(0,t.__)("Remove","mine-cloudvod"),onClick:u}),r&&(0,n.createElement)(o.Button,{icon:"plus-alt",label:wp.i18n.__("Add Menu","mine-cloudvod"),style:{marginBottom:"8px"},onClick:()=>{r(),m(""),p(""),w("")}}))))};var i=e=>{let{setAttributes:t,attributes:l}=e;const{submenus:o}=l;let[r,i]=(0,n.useState)({title:"",url:"",sortno:""});return(0,n.createElement)("div",null,(o||[]).sort((function(e,t){return parseInt(e.sortno)-parseInt(t.sortno)})).map(((e,l)=>(0,n.createElement)(u,{key:`${l}-${e.sortno}`,sortno:e.sortno,title:e.title,url:e.url,update:l=>{!function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.indexOf(e),r=o.map(((e,t)=>t!==n?e:{...e,...l}));t({submenus:r})}(e,l)},remove:()=>{(e=>{let l=o.indexOf(e);t({submenus:o.filter(((e,t)=>t!==l))})})(e)}}))),(0,n.createElement)(u,{sortno:r.sortno,title:r.title,url:r.url,update:e=>{i({...r,...e})},add:()=>{r.sortno&&r.title&&(t({submenus:[...o||[],{sortno:r.sortno,title:r.title,url:r.url}]}),i({sortno:"",title:"",url:""}))}}))};const s={edit:(0,o.withNotices)((e=>{let{attributes:t,setAttributes:l}=e;const{submenus:u}=t,s=(0,n.useRef)(),a=(0,r.useBlockProps)({ref:s});return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(r.InspectorControls,null,(0,n.createElement)(o.PanelBody,{title:wp.i18n.__("Add Submenu","mine-cloudvod")},(0,n.createElement)(i,{attributes:t,setAttributes:l}))),(0,n.createElement)("figure",a,(0,n.createElement)("a",null,(0,n.createElement)("img",{src:"/wp-content/plugins/mine-cloudvod/static/img/user.png",style:{width:"40px",height:"40px"}}))))})),save:function(){return null}};(0,e.registerBlockType)(l.u2,s)}();