!function(){"use strict";var e=window.wp.element,t=window.wp.blocks,l=(window.wp.i18n,JSON.parse('{"u2":"mine-cloudvod/video-playlist"}'));const{useEffect:a,useRef:n,useMemo:c,useState:i}=wp.element,{Spinner:o,Placeholder:s}=wp.components,{Disabled:m,Spinner:r,withNotices:d,Placeholder:p,ToggleControl:v,PanelBody:u,TextControl:w,ComboboxControl:h}=wp.components,{InspectorControls:_,useBlockProps:E}=wp.blockEditor,{useState:g,Fragment:b,useEffect:y,useRef:f}=wp.element,{dispatch:N,useSelect:C}=wp.data;var A=d((t=>{let{attributes:l,setAttributes:a}=t;const{plName:n,mcvTag:c,show:i,autonext:o}=l,[s,m]=g(!0),[d,N]=g([]),C=f(),A=E({ref:C}),x=e=>t=>{a({[e]:t})};let k=f(!0);y((()=>(wp.apiFetch({path:wp.url.addQueryArgs("/wp/v2/mcv_video_tag",{per_page:-1,orderby:"count",order:"desc",_fields:["id","name","count"],hide_empty:!0})}).then((e=>{k&&N(e.map((e=>({value:e.id,label:e.name}))))})).catch((()=>{k&&N([])})),()=>{k=!1})),[]);const[M,P]=g([]);y((()=>{c>0&&(m(!0),wp.apiFetch({path:wp.url.addQueryArgs("/wp/v2/mcv_video",{per_page:-1,mcv_video_tag:c})}).then((e=>{m(!1),P(e)})).catch((()=>{P([])})))}),[c]);const z=(0,e.createElement)(b,null,(0,e.createElement)(_,null,(0,e.createElement)(u,{title:wp.i18n.__("Video Playlist","mine-cloudvod"),initialOpen:!0},(0,e.createElement)(v,{label:wp.i18n.__("Display Playlist","mine-cloudvod"),onChange:x("show"),checked:i,help:wp.i18n.__("Display the playlist or not.","mine-cloudvod")}),(0,e.createElement)(v,{label:wp.i18n.__("Auto Next","mine-cloudvod"),onChange:x("autonext"),checked:o,help:wp.i18n.__("Auto play next video.","mine-cloudvod")}),(0,e.createElement)(h,{label:wp.i18n.__("CloudVod Album","mine-cloudvod"),value:c,onChange:e=>{let t=d.filter((t=>{if(t.value==e)return!0}));t&&t[0]?.label&&a({plName:t[0].label}),a({mcvTag:e})},options:d,onInputChange:e=>N(options.filter((t=>t.label.toLowerCase().startsWith(e.toLowerCase()))))}),(0,e.createElement)(w,{type:"string",label:wp.i18n.__("Playlist Name","mine-cloudvod"),value:void 0!==n?n:"",onChange:e=>{a({plName:e})}}))));return(0,e.createElement)("div",A,(0,e.createElement)(b,null,z,(0,e.createElement)("div",{className:"mcv-videos"},(0,e.createElement)("div",{className:"mcv-player"},(0,e.createElement)("figure",{className:"wp-block-video"},(0,e.createElement)("center",null,wp.i18n.__("Player Container","mine-cloudvod"))),(0,e.createElement)("div",{className:"wide-switch"},(0,e.createElement)("span",{className:"btn_switch_bg"},(0,e.createElement)("svg",{viewBox:"0 0 9 59",width:"9",height:"59"},(0,e.createElement)("path",{d:"M3.8,5.1C1.7,4.3,0.2,2.4,0,0h0v5v4v41v5v3.9c0.6-1.9,2.1-3.4,4-4v0c2.9-0.7,5-3.2,5-6.3v-37  C9,8.4,6.8,5.7,3.8,5.1z"}))),(0,e.createElement)("i",{className:"icon_sm icon_left_sm"},(0,e.createElement)("svg",{id:"svg_icon_left_sm",viewBox:"0 0 16 16"},(0,e.createElement)("path",{d:"M6.427 8l3.284 3.284a1.01 1.01 0 0 1-1.427 1.427L4.29 8.716A1.003 1.003 0 0 1 3.995 8a1.005 1.005 0 0 1 .295-.717l3.994-3.994a1.01 1.01 0 0 1 1.427 1.427L6.427 8z",fill:"#e6e6e6"}))),(0,e.createElement)("i",{className:"icon_sm icon_right_sm"},(0,e.createElement)("svg",{id:"svg_icon_right_sm",viewBox:"0 0 16 16"},(0,e.createElement)("path",{d:"M11.71 8.716L7.716 12.71a1.01 1.01 0 0 1-1.427-1.427L9.573 8 6.289 4.716a1.01 1.01 0 0 1 1.427-1.427l3.994 3.994c.198.198.296.458.295.717.001.259-.097.518-.295.716z",fill:"#e6e6e6"}))))),(0,e.createElement)("div",{className:"mcv-playlist"},s?(0,e.createElement)(p,{className:"mine-cloudvod__placeholder is-loading"},(0,e.createElement)(r,null)):(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"mcv-title"},n,(0,e.createElement)("span",null,"共",(0,e.createElement)("b",null,M.length),"节")),(0,e.createElement)("div",{className:"mcv-playlist-ul"},(0,e.createElement)("ul",null,M.map((t=>(0,e.createElement)("li",{key:"key_"+t.id},(0,e.createElement)("span",null,t.title.raw)))))))))))}));const x={icon:(0,e.createElement)("svg",{fill:"none",className:"mine-block-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28"},(0,e.createElement)("path",{d:"M921.6 204.8H102.4a68.288 68.288 0 0 1 68.288-68.288h682.624A68.288 68.288 0 0 1 921.6 204.8zM819.2 68.288H204.8A68.288 68.288 0 0 1 273.088 0h477.888A68.288 68.288 0 0 1 819.2 68.288zM955.712 273.088H68.288A68.288 68.288 0 0 0 0 341.376v614.4a68.288 68.288 0 0 0 68.288 68.288h887.424A68.288 68.288 0 0 0 1024 955.776v-614.4a68.288 68.288 0 0 0-68.288-68.288zM409.6 819.2V477.888l273.088 170.688z"})),edit:A,save:function(){return null}};(0,t.registerBlockType)(l.u2,x)}();